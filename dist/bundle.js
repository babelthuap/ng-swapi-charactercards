"use strict";var app=angular.module("swapiCardsApp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("home",{url:"/"})}]),app.controller("MainCtrl",["$scope","dataSvc",function(t,e){t.$on("displayPlanet",function(e,n){t.planetIndex=n,t.$broadcast("planetIndex",n)})}]);var app=angular.module("swapiCardsApp");app.directive("swapiPlanetsSelector",function(){return{restrict:"AE",templateUrl:"templates/planets.html",scope:{minResidents:"@minResidents"},controller:["$scope","dataSvc",function(t,e){t.planets=e.planets,t.showList=!1;for(var n=7,a=[],r=1;n>=r;r++)a.push(e.getPlanets(r));Promise.all(a).then(function(n){var a=n.reduce(function(t,e){return t.concat(e.data.results)},[]).filter(function(e){return e.residents.length>=t.minResidents});t.planets=a,e.planets=a,window.location.replace("#")},function(t){return console.error(t)}),t.toggleShowList=function(){t.showList=!t.showList},t.displayPlanet=function(e){t.$emit("displayPlanet",e)}}]}}),app.directive("swapiPlanet",function(){return{restrict:"AE",templateUrl:"templates/planet.html",scope:{index:"@"},controller:["$scope","dataSvc",function(t,e){function n(){try{t.planet=e.planets[t.index],t.residentIds=e.planets[t.index].residents.map(function(t){return t.match(/\d+/)[0]})}catch(n){console.error(n)}}t.planet,t.residentIds,t.$on("planetIndex",n)}]}}),app.directive("swapiResident",function(){return{restrict:"AE",templateUrl:"templates/resident.html",scope:{id:"@"},controller:["$scope","dataSvc",function(t,e){if(t.id,t.residents=e.residents,t.residents[t.id])t.character=t.residents[t.id];else{var n=e.getCharacter(t.id);n.then(function(e){t.character=e.data,t.residents[t.id]=e.data},function(t){return console.error(t)})}}]}});var app=angular.module("swapiCardsApp");app.service("dataSvc",["$http",function(t){this.planets=[],this.residents={},this.displayPlanet=!1,this.getPlanets=function(e){return t.get("http://swapi.co/api/planets/?format=json&page="+e)},this.getCharacter=function(e){return t.get("http://swapi.co/api/people/"+e+"/?format=json")}}]);