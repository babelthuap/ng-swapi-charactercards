"use strict";var app=angular.module("swapiCardsApp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("home",{url:"/",templateUrl:"templates/planets.html"})}]),app.controller("MainCtrl",["$scope","dataSvc",function(t,e){}]);var app=angular.module("swapiCardsApp");app.directive("swapiPlanetsSelector",function(){return{restrict:"AE",templateUrl:"templates/planets.html",scope:{minResidents:"@minResidents"},controller:["$scope","dataSvc",function(t,e){t.planets=e.planets,t.showList=!1;var n=e.getPlanets();n.then(function(n){var s=n.data.results.filter(function(e){return e.residents.length>=t.minResidents});t.planets=s,e.planets=s},function(t){return console.error(t)}),t.toggleShowList=function(){t.showList=!t.showList},t.displayPlanet=function(e){console.log("index:",e),t.showList=!1}}]}}),app.directive("swapiPlanet",function(){return{restrict:"AE",templateUrl:"templates/planet.html",scope:{index:"@"},controller:["$scope","dataSvc",function(t,e){t.planets=e.planets,setTimeout(function(){t.planet=e.planets[t.index],t.residentIds=e.planets[t.index].residents.map(function(t){return t.replace(/\D/g,"")}),console.log("planet "+t.index+":",e.planets[t.index]),console.log("resident ids:",t.residentIds)},3e3)}]}}),app.directive("swapiResident",function(){return{restrict:"AE",templateUrl:"templates/resident.html",scope:{id:"@"},controller:["$scope","dataSvc",function(t,e){if(t.id,t.residents=e.residents,t.residents[t.id])t.character=t.residents[t.id];else{var n=e.getCharacter(t.id);n.then(function(e){t.character=e.data,t.residents[t.id]=e.data},function(t){return console.error(t)})}}]}});var app=angular.module("swapiCardsApp");app.service("dataSvc",["$http",function(t){this.planets=[],this.residents={},this.displayPlanet=!1,this.getPlanets=function(){return t.get("http://swapi.co/api/planets/?format=json")},this.getCharacter=function(e){return t.get("http://swapi.co/api/people/"+e+"/?format=json")}}]);